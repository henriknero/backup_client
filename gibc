#!/usr/bin/env python3
#coding=utf-8
"""
    docstring here
"""
import os
import tkinter
import logging
import config
from backup_client.frames import Loginwindow, Mainwindow
from backup_client import Backend
from backup_client.network import GitGogs
from backup_client.filehandler.pickles import load_obj


def main():
    try:
        credentials = GitGogs(config.API, config.ROOT,load_obj("udata"))
    except FileNotFoundError:
        login = tkinter.Tk()
        dialog = Loginwindow(login)
        login.wait_window()
        credentials = GitGogs(config.API, config.ROOT, dialog.result)

    if credentials is not None:
        top = tkinter.Tk()
        top.geometry("250x350")
        top.title("Git Backup Client")
        Mainwindow(top, Backend(gitgogs=credentials))
        top.mainloop()


if __name__ == "__main__":
    loglevel = int(os.getenv('LOG_LEVEL', str(logging.WARNING)))
    logging.basicConfig(level=loglevel)
    main()
#Hyfsat bra doc
#http://effbot.org/tkinterbook/wm.htm
#Värdelös men vill ha ändå https://www.tutorialspoint.com/python/python_gui_programming.htm
